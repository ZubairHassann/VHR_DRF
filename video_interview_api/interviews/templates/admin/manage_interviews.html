"""extends "admin/base_admin.html" %}
Django settings for config project.% endblock %}
{% block page_title %}Manage Interviews{% endblock %}
Generated by 'django-admin startproject' using Django 5.1.6.
{% block admin_content %}
For more information on this file, see-md overflow-hidden">
https://docs.djangoproject.com/en/5.1/topics/settings/
    <div class="p-6 bg-gray-50 border-b">
For the full list of settings and their values, seection="{% url 'add_interview' %}" class="space-y-4">
https://docs.djangoproject.com/en/5.1/ref/settings/
"""         <div class="grid grid-cols-2 gap-4">
                <div>
import os           <label class="block text-sm font-medium text-gray-700 mb-1">Interview Title</label>
from pathlib import Pathut type="text" name="title" required
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent
                    <label class="block text-sm font-medium text-gray-700 mb-1">Schedule Date & Time</label>
                    <input type="datetime-local" name="scheduled_date" required
# Quick-start development settings - unsuitable for productionded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
# See https://docs.djangoproject.com/en/5.1/howto/deployment/checklist/
                <div class="col-span-2">
# SECURITY WARNING: keep the secret key used in production secret!ray-700 mb-1">Description</label>
SECRET_KEY = 'django-insecure-f(sm*&=!6p8qvcoz0)h5z2b#-z*6%&#&hulby7sy__=g8s@k4f'
                              class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True</div>
            <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">
ALLOWED_HOSTS = [] class="fas fa-plus mr-2"></i> Schedule Interview
            </button>
        </form>
# Application definition

INSTALLED_APPS = [s List -->
    'django.contrib.admin',auto">
    'django.contrib.auth',w-full divide-y divide-gray-200">
    'django.contrib.contenttypes',50">
    'django.contrib.sessions',
    'django.contrib.messages',"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
    'django.contrib.staticfiles',-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date & Time</th>
    'interviews',   <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
    'corsheaders',  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
    'rest_framework',
]           </thead>
            <tbody class="bg-white divide-y divide-gray-200">
MIDDLEWARE = [  {% for interview in interviews %}
    'django.middleware.security.SecurityMiddleware',on">
    'corsheaders.middleware.CorsMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',xt-gray-900">{{ interview.title }}</span>
    'django.middleware.common.CommonMiddleware',ion %}
    'django.middleware.csrf.CsrfViewMiddleware',ray-500">{{ interview.description|truncatechars:100 }}</p>
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',xt-sm text-gray-500">
    'interviews.middleware.StaffRequiredMiddleware',date:"M d, Y H:i" }}
]                   </td>
                    <td class="px-6 py-4 whitespace-nowrap">
ROOT_URLCONF = 'config.urls'n class="px-2 py-1 text-sm rounded-full
                            {% if interview.status == 'pending' %}bg-yellow-100 text-yellow-800
TEMPLATES = [               {% elif interview.status == 'accepted' %}bg-green-100 text-green-800
    {                       {% else %}bg-red-100 text-red-800{% endif %}">
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, "interviews/templates")],
        'APP_DIRS': True,
        'OPTIONS': {<td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
            'context_processors': [lick="editInterview({{ interview.id }})" 
                'django.template.context_processors.debug',text-blue-900">
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',id }})"
            ],                  class="text-red-600 hover:text-red-900">
        },                  <i class="fas fa-trash"></i> Delete
    },                  </button>
]                   </td>
                </tr>
WSGI_APPLICATION = 'config.wsgi.application'
                <tr>
                    <td colspan="4" class="px-6 py-4 text-center text-gray-500">
# Database              No interviews scheduled yet.
# https://docs.djangoproject.com/en/5.1/ref/settings/#databases
                </tr>
DATABASES = {   {% endfor %}
    'default': {ody>
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }>
}
<!-- Edit Interview Modal -->
<div id="editModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full">
# Password validationive top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
# https://docs.djangoproject.com/en/5.1/ref/settings/#auth-password-validators
            <h3 class="text-lg font-medium leading-6 text-gray-900 mb-4">Edit Interview</h3>
AUTH_PASSWORD_VALIDATORS = [rm" method="POST">
    {           {% csrf_token %}
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },          <div class="space-y-4">
    {               <div>
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',1">Title</label>
    },                  <input type="text" id="edit_title" name="title" required
    {                          class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },              <div>
    {                   <label class="block text-sm font-medium text-gray-700 mb-1">Schedule Date & Time</label>
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',"scheduled_date" required
    },                         class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
]                   </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
# Internationalization  <textarea id="edit_description" name="description" rows="3"
# https://docs.djangoproject.com/en/5.1/topics/i18n/ py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
                    </div>
LANGUAGE_CODE = 'en-us'
                <div class="mt-4 flex justify-end space-x-2">
TIME_ZONE = 'UTC'   <button type="button" onclick="closeEditModal()" 
                            class="bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300">
USE_I18N = True         Cancel
                    </button>
USE_TZ = True       <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">
                        Save Changes
                    </button>
# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/5.1/howto/static-files/
        </div>
STATIC_URL = 'static/'
</div>
# Default primary key field type
# https://docs.djangoproject.com/en/5.1/ref/settings/#default-auto-field
function editInterview(id) {
DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'
        .then(response => response.json())
# CORS_ALLOWED_ORIGINS = [
#     "http://127.0.0.1:8001",  # âœ… Frontend URLiew_id').value = id;
# ]         document.getElementById('edit_title').value = data.title;
            document.getElementById('edit_scheduled_date').value = data.scheduled_date;
CORS_ALLOW_ALL_ORIGINS = TruentById('edit_description').value = data.description || '';
            document.getElementById('editModal').classList.remove('hidden');




MEDIA_ROOT = os.path.join(BASE_DIR, 'media')MEDIA_URL = '/media/'# Media files configuration        });
}

function closeEditModal() {
    document.getElementById('editModal').classList.add('hidden');
}

function deleteInterview(id) {
    if (confirm('Are you sure you want to delete this interview?')) {
        fetch(`/api/interviews/${id}/`, {
            method: 'DELETE',
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
            },
        }).then(() => {
            showToast('Interview deleted successfully');
            window.location.reload();
        });
    }
}

// Form submission handling
document.getElementById('addInterviewForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    
    fetch(this.action, {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
        },
    })
    .then(response => response.json())
    .then(data => {
        if (data.error) {
            showToast(data.error, 'error');
        } else {
            showToast('Interview scheduled successfully');
            window.location.reload();
        }
    });
});

document.getElementById('editForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const id = document.getElementById('edit_interview_id').value;
    const formData = new FormData(this);
    
    fetch(`/admin/interviews/${id}/edit/`, {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
        },
    })
    .then(response => response.json())
    .then(data => {
        if (data.error) {
            showToast(data.error, 'error');
        } else {
            showToast('Interview updated successfully');
            window.location.reload();
        }
    });
});
</script>
{% endblock %}